<!-- character information grid ________________________________________________ -->

<div class="sheet-header_logo">

  <div class="sheet-gs1">Character Name</div>
  <div class="sheet-gs2">Faction</div>
  <div class="sheet-gs3">Soldier Type</div>
  <div class="sheet-gs4"><input type="text" name="attr_character_name" /></div>
  <div class="sheet-gs5"><select name="attr_faction">
    <option selected="selected" />
    <option>United Nations Space Command</option>
    <option>Covenant</option>
    <option>Forerunner</option>
    <option>Specific</option>
  </select></div>
  <div class="sheet-gs6"><input type="text" name="attr_soldier_type" /></div>
  <div class="sheet-gs7"> <img name="logo" src="https://i.postimg.cc/xjBZN4Hy/mythic-logo.png" height="130" width="130"/></div>
  <!-- REPLACE LOGO SOURCE ONCE COMPLETE: src="images/mythic_logo.png" -->
  <div class="sheet-gs8"><input type="text" name="attr_rank" /></div>
  <div class="sheet-gs9"><input type="text" name="attr_specialisation" /></div>
  <div class="sheet-gs10"><input type="text" name="attr_race" /></div>
  <div class="sheet-gs11">Rank</div>
  <div class="sheet-gs12">Specialisation</div>
  <div class="sheet-gs13">Race</div>

</div>
<br>

<script type="text/javascript">
    // TODO: SET THE PROPER URLS TO THE IMAGES HERE
    const factions = {
        "": "https://i.postimg.cc/xjBZN4Hy/mythic-logo.png",
        "United Nations Space Command": "https://i.postimg.cc/3JNpqVCM/faction-logo-UNSC.png",
        "Covenant": "",
        "Forerunner": "",
        "Specific": ""
    }
    const selects = document.getElementsByName("attr_faction");
    for (let select of selects) {
        select.addEventListener("change", function (e) {
            if (factions[e.target.value]) {
                const logoEl = e.target.parentNode.parentNode.getElementsByTagName("img").logo;
                if (logoEl) logoEl.src = factions[e.target.value];
            }
        });
    }
</script>

<!-- SHEET WORKER FOR FACTION DROPDOWN -->
<script type="text/worker">
  console.log("Sheet worker initiated");
  on("change:faction", function() {
    console.log("Change event triggered");
    getAttrs(["faction"], function(obj) {
	  let Beter = obj.faction;
// Make a map for your different hyperlinks dummy!
	  let logo_human = "https://i.postimg.cc/3JNpqVCM/faction-logo-UNSC.png"
      if (Beter == "United Nations Space Command") setAttrs({ logo.src: logo_human });
	});
  });
</script>

<!-- ______________________________ characteristics grid ______________________________ -->

<div class="sheet-characteristics">

  <div>
    <div class="sheet-characteristics_box"><button name="STR" type="roll" value="/me rolls strength with [[floor(([[@{STR} + @{STR_advancement} + ?{Modifier|0}]] - 1d100)/10)]] degrees of sucess"<span>STR</span></button></div>
    <div class="sheet-characteristics_box"><input type="text" name="attr_STR" /></div>
    <div class="sheet-characteristics_box"><select name="attr_STR_advancement">
      <option value="0"selected="selected">None +0</option>
      <option value="5">Simple +5</option>
      <option value="10">Rookie +10</option>
      <option value="15">Inter. +15</option>
      <option value="20">Trained +20</option>
      <option value="25">Mastery +25</option>
    </select></div>
  </div>

  <div>
    <div class="sheet-characteristics_box"><button name="TOU" type="roll" value="/me rolls toughness with [[floor(([[@{TOU} + @{TOU_advancement} + ?{Modifier|0}]] - 1d100)/10)]] degrees of sucess"<span>TOU</span></button></div>
    <div class="sheet-characteristics_box"><input type="text" name="attr_TOU" /></div>
    <div class="sheet-characteristics_box"><select name="attr_TOU_advancement">
      <option value="0"selected="selected">None +0</option>
      <option value="5">Simple +5</option>
      <option value="10">Rookie +10</option>
      <option value="15">Interm. +15</option>
      <option value="20">Trained +20</option>
      <option value="25">Mastery +25</option>
    </select></div>
  </div>

  <div>
    <div class="sheet-characteristics_box"><button name="AGI" type="roll" value="/me rolls agility with [[floor(([[@{AGI} + @{AGI_advancement} + ?{Modifier|0}]] - 1d100)/10)]] degrees of sucess"<span>AGI</span></button></div>
    <div class="sheet-characteristics_box"><input type="text" name="attr_AGI" /></div>
    <div class="sheet-characteristics_box"><select name="attr_AGI_advancement">
      <option value="0"selected="selected">None +0</option>
      <option value="5">Simple +5</option>
      <option value="10">Rookie +10</option>
      <option value="15">Inter. +15</option>
      <option value="20">Trained +20</option>
      <option value="25">Mastery +25</option>
    </select></div>
  </div>

  <div>
    <div class="sheet-characteristics_box"><button name="WFR" type="roll" value="/me rolls warfare ranged with [[floor(([[@{WFR} + @{WFR_advancement} + ?{Modifier|0}]] - 1d100)/10)]] degrees of sucess"<span>WFR</span></button></div>
    <div class="sheet-characteristics_box"><input type="text" name="attr_WFR" /></div>
    <div class="sheet-characteristics_box"><select name="attr_WFR_advancement">
      <option value="0"selected="selected">None +0</option>
      <option value="5">Simple +5</option>
      <option value="10">Rookie +10</option>
      <option value="15">Inter. +15</option>
      <option value="20">Trained +20</option>
      <option value="25">Mastery +25</option>
    </select></div>
  </div>

  <div>
    <div class="sheet-characteristics_box"><button name="WFM" type="roll" value="/me rolls warfare melee with [[floor(([[@{WFM} + @{WFM_advancement} + ?{Modifier|0}]] - 1d100)/10)]] degrees of sucess"<span>WFM</span></button></div>
    <div class="sheet-characteristics_box"><input type="text" name="attr_WFM" /></div>
    <div class="sheet-characteristics_box"><select name="attr_WFM_advancement">
      <option value="0"selected="selected">None +0</option>
      <option value="5">Simple +5</option>
      <option value="10">Rookie +10</option>
      <option value="15">Inter. +15</option>
      <option value="20">Trained +20</option>
      <option value="25">Mastery +25</option>
    </select></div>
  </div>

  <div>
    <div class="sheet-characteristics_box"><button name="INT" type="roll" value="/me rolls intellect [[floor(([[@{INT} + @{INT_advancement} + ?{Modifier|0}]] - 1d100)/10)]] degrees of sucess"<span>INT</span></button></div>
    <div class="sheet-characteristics_box"><input type="text" name="attr_INT" /></div>
    <div class="sheet-characteristics_box"><select name="attr_INT_advancement">
      <option value="0"selected="selected">None +0</option>
      <option value="5">Simple +5</option>
      <option value="10">Rookie +10</option>
      <option value="15">Inter. +15</option>
      <option value="20">Trained +20</option>
      <option value="25">Mastery +25</option>
    </select></div>
  </div>

  <div>
    <div class="sheet-characteristics_box"><button name="PER" type="roll" value="/me rolls perception with [[floor(([[@{PER} + @{PER_advancement} + ?{Modifier|0}]] - 1d100)/10)]] degrees of sucess"<span>PER</span></button></div>
    <div class="sheet-characteristics_box"><input type="text" name="attr_PER" /></div>
    <div class="sheet-characteristics_box"><select name="attr_PER_advancement">
      <option value="0"selected="selected">None +0</option>
      <option value="5">Simple +5</option>
      <option value="10">Rookie +10</option>
      <option value="15">Inter. +15</option>
      <option value="20">Trained +20</option>
      <option value="25">Mastery +25</option>
    </select></div>
  </div>

  <div>
    <div class="sheet-characteristics_box"><button name="CR" type="roll" value="/me rolls courage with [[floor(([[@{CR} + @{CR_advancement} + ?{Modifier|0}]] - 1d100)/10)]] degrees of sucess"<span>CR</span></button></div>
    <div class="sheet-characteristics_box"><input type="text" name="attr_CR" /></div>
    <div class="sheet-characteristics_box"><select name="attr_CR_advancement">
      <option value="0"selected="selected">None +0</option>
      <option value="5">Simple +5</option>
      <option value="10">Rookie +10</option>
      <option value="15">Inter. +15</option>
      <option value="20">Trained +20</option>
      <option value="25">Mastery +25</option>
    </select></div>
  </div>

  <div>
    <div class="sheet-characteristics_box"><button name="CH" type="roll" value="/me rolls charisma with [[floor(([[@{CH} + @{CH_advancement} + ?{Modifier|0}]] - 1d100)/10)]] degrees of sucess"<span>CH</span></button></div>
    <div class="sheet-characteristics_box"><input type="text" name="attr_CH" /></div>
    <div class="sheet-characteristics_box"><select name="attr_CH_advancement">
      <option value="0"selected="selected">None +0</option>
      <option value="5">Simple +5</option>
      <option value="10">Rookie +10</option>
      <option value="15">Inter. +15</option>
      <option value="20">Trained +20</option>
      <option value="25">Mastery +25</option>
    </select></div>
  </div>

  <div>
    <div class="sheet-characteristics_box"><button name="LD" type="roll" value="/me rolls leadership with [[floor(([[@{LD} + @{LD_advancement} + ?{Modifier|0}]] - 1d100)/10)]] degrees of sucess"<span>LD</span></button></div>
    <div class="sheet-characteristics_box"><input type="text" name="attr_LD" /></div>
    <div class="sheet-characteristics_box"><select name="attr_LD_advancement">
      <option value="0"selected="selected">None +0</option>
      <option value="5">Simple +5</option>
      <option value="10">Rookie +10</option>
      <option value="15">Inter. +15</option>
      <option value="20">Trained +20</option>
      <option value="25">Mastery +25</option>
    </select></div>
  </div>

</div>
<br>



<!-- ______________________________ mythic characteristics, movement and pushing grid ______________________________ -->

<div class="sheet-characteristics_mythic_movement_carry">

  <div class="sheet-characteristics2_mythic">
    <div class="sheet-mythicgs1 ">Mythic Characteristics</div>
    <div class="sheet-mythicgs2 "><input type="number" value="0" name="attr_STR_mythic" /></div>
    <div class="sheet-mythicgs3 "><input type="number" value="0" name="attr_TOU_mythic" /></div>
    <div class="sheet-mythicgs4 "><input type="number" value="0" name="attr_AGI_mythic" /></div>
    <div class="sheet-mythicgs5 ">Strength</div>
    <div class="sheet-mythicgs6 ">Toughness</div>
    <div class="sheet-mythicgs7 ">Agility</div>
  </div>

  <div class="sheet-characteristics2_movement">
    <div class="sheet-movementgs1 ">Character Movement</div>
    <div class="sheet-movementgs2 "><input type="number" name="attr_half_move" /></div>
    <div class="sheet-movementgs3 "><input type="number" name="attr_full_move" /></div>
    <div class="sheet-movementgs4 "><input type="number" name="attr_charge_move" /></div>
    <div class="sheet-movementgs5 "><input type="number" name="attr_run_move" /></div>
    <div class="sheet-movementgs6 "><input type="number" name="attr_sprint_move" /></div>
    <div class="sheet-movementgs7 "><input type="number" name="attr_jump_move" /></div>
    <div class="sheet-movementgs8 "><input type="number" name="attr_leap_move" /></div>
    <div class="sheet-movementgs9 ">Half Move</div>
    <div class="sheet-movementgs10 ">Full Move</div>
    <div class="sheet-movementgs11 ">Charge</div>
    <div class="sheet-movementgs12 ">Run</div>
    <div class="sheet-movementgs13 ">Sprint</div>
    <div class="sheet-movementgs14 ">Jump</div>
    <div class="sheet-movementgs15 ">Leap</div>
  </div>

  <div class="sheet-characteristics2_carry">
    <div class="sheet-carrygs1 ">Carrying Capacity</div>
    <div class="sheet-carrygs2 "><input type="number" name="attr_carry" /></div>
    <div class="sheet-carrygs3 "><input type="number" name="attr_lift" /></div>
    <div class="sheet-carrygs4 "><input type="number" name="attr_push" /></div>
    <div class="sheet-carrygs5 ">Carry</div>
    <div class="sheet-carrygs6 ">Lift</div>
    <div class="sheet-carrygs7 ">Push</div>
  </div>

</div>



<!-- ______________________________ initiative/sheet tabs grid ______________________________ -->

<div class="sheet-initiative_tabs_main">
  <div class="sheet-initiative_tabs_initiative">
    <div class="sheet-initiative_tabs_boxes"><button name="initiative" type="roll" value="/me rolls initiative with [[@{initmod0}(@{initmod1}+@{initmod2}+@{initmod3})]]"<span>Initiative</span></button></div>
    <div style="display:none;"><input name="attr_initmod0" value="floor"/></div>
    <div class="sheet-initiative_tabs_boxes"><select name="attr_initmod1">
      <option value="1d10"selected="selected">Standard</option>
      <option value="2d10k1">Fast Foot</option>
      <option value="?{dice|1d10}">Custom</option>
    </select></div>
    <div class="sheet-initiative_tabs_boxes">+</div>
    <div class="sheet-initiative_tabs_boxes"><input type="number" name="attr_initmod2" value="0"/></div>
    <div class="sheet-initiative_tabs_boxes">+</div>
    <div class="sheet-initiative_tabs_boxes"><select name="attr_initmod3">
      <option value="(@{AGI}+@{AGI_advancement})/10+@{AGI_mythic}"selected="selected">Agility</option>
      <option value="(@{INT} + @{INT_advancement})/10">Intellect</option>
      <option value="0">N/A</option>
    </select></div>
  </div>
  <div class="sheet-initiative_tabs_tabs">
    <button type="action" name="act_core" >Core</button>
    <button type="action" name="act_equipment" >Equipment</button>
    <button type="action" name="act_medical" >Medical</button>
    <button type="action" name="act_advancements" >Advancements</button>
    <button type="action" name="act_journal" >Journal</button>
    <button type="action" name="act_vehicles" >Vehicles</button>
    <button type="action" name="act_settings" >Settings</button>
  </div>
</div>
<hr>

<!-- ______________________________ logic for the sheet tabs ___________________ -->

<input type='hidden' class='sheet-tabstoggle' name='attr_sheetTab'  value='core'  />
<script type="text/worker">
  const buttonlist = ["core","equipment","medical","advancements","journal","vehicles","settings"];
  buttonlist.forEach(button => {
    on(`clicked:${button}`, function() {
      setAttrs({
        sheetTab: button
      });
    });
  });
</script>



<!-- ______________________________ start of minimisable infographic____________ -->

<div class="sheet-minimisable_infographic_main">
  <input type="checkbox" class="sheet-minimisable_switch">
  <div class="sheet-minimisable_infographic_a">
    a short single line containing all the important info you might need
  </div>
  <div class="sheet-minimisable_infographic_b">
    a long
    <div>list</div>
    of text<br>
    with
    a bunch<br>
    of information
  </div>
</div>



<!-- ______________________________ sheet tabs _________________________________ -->
<!-- ______________________________ start of core ______________________________ -->

<div class='sheet-core'>

  <h2>Core Data</h2>
  <div class="sheet-core_lists">
    <div class="sheet-core_lists1">
      <fieldset name="skills" class="repeating_skills">
	    <input type="text" name="skill" />
      </fieldset>
	</div>
  </div>

</div>


<div class='sheet-equipment'>
  <h2>Equipment/gear</h2>
  <span>Equipment Goes here</span>
</div>
<div class='sheet-medical'>
  <h2>Medical</h2>
  <span>Sheet Medical goes here</span>
</div>

<div class='sheet-advancements'>
  <h2>Advancements</h2>
  <span>Advancements go here</span>
</div>

<div class='sheet-journal'>
  <h2 class='sheet-journal_heading'>Journal: Objectives</h2>
    <fieldset name="objective" class="repeating_objectives">
	    <input type="text" name="attr_objective" class="sheet-objectives" />
		<input type="checkbox" name="attr_objective_completed" />
	</fieldset>
  <h2 class='sheet-journal_heading'>Journal: Notes</h2>
	<fieldset name="notes" class="repeating_notes">
		<textarea name="attr_notes" class="sheet-journal_notes" placeholder="Enter information such as plot details, unresolved mission details such as escaped targets, character relationships, et cetera here."></textarea>
	</fieldset>
</div>

<div class='sheet-vehicles'>
  <h2 class>Vehicles</h2>
  <span>Vehicles goes here</span>
</div>

<div class='sheet-settings'>
  <h2>Settings</h2>
  <span>Settings goes here</span>
</div>
